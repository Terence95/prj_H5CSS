(function(){var e={isWeishiInstalled:function(){return window.wdextcmd||this.getSMActiveX()||this.isNPExist()},isNPExist:function(){var e="360MMPlugin".toLowerCase(),t=window.navigator.plugins;for(var n=0,r=t.length;n<r;n++){var i=t[n];if(i.name.toLowerCase()==e)return i}return!1},getSMActiveX:function(){var e=document.createElement("object");e.classid="clsid:467B32FF-C688-40FF-95FC-C7C61247B0AA";try{return e.GetVersion(),e}catch(t){return!1}},getPlugin:function(e){return window.ActiveXObject?this.getIP(e):this.getNP()},getIP:function(e){if(!e&&window.wdextcmd&&typeof wdextcmd.Call360MobileMgr!="unknown")return{iswd:!0,target:window.wdextcmd};var t=document.createElement("object");return t.classid="clsid:467B32FF-C688-40FF-95FC-C7C61247B0AA",t},getNP:function(){return this.embed||this.createEmbed(),this.embed},createEmbed:function(){var e=$('<div style="visibility:hidden;position:absolute;z-index:-1;top:-100px;"/>'),t;t=document.createElement("embed"),t.id="pluginId",t.type="application/x360mmplugin",e.append(t),e.appendTo(document.body),e=null,this.embed=t},gotoProtocol:function(e){window.open(e,"_self")}},t={byteLen:function(e){return e.replace(/[^\x00-\xff]/g,"--").length},subByte:function(e,t,n){return this.byteLen(e)<=t?e:(n=n||"",t-=this.byteLen(n),e.substr(0,t).replace(/([^\x00-\xff])/g,"$1 ").substr(0,t).replace(/[^\x00-\xff]$/,"").replace(/([^\x00-\xff]) /g,"$1")+n)},addEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}},n=!!window.ActiveXObject,r=n&&!window.XMLHttpRequest,i=['<div id="zsp_con" class="zsp_con">','<h2>\u6b63\u5728\u6253\u5f00360\u624b\u673a\u52a9\u624b\u4e0b\u8f7d\u5e76\u5b89\u88c5<span id="zsp_sname" title="{{name}}">"{{name|16}}"</span></h2>','<h3>\u5982\u679c\u5e94\u7528\u4e0b\u8f7d\u6ca1\u6709\u5f00\u59cb\uff0c<span class="zsp_hide_for_ie">\u60a8\u53ef\u4ee5\uff1a</span>','<span class="zsp_show_for_ie">\u8bf7\u70b9\u51fb <a class="zsp_close" href="http://www.360.cn/shoujizhushou/index.html" target="360zhushouOFS">\u5b89\u88c5360\u624b\u673a\u52a9\u624b<span>&gt;&gt;</span></a></span>',"</h3>",'<ul class="zsp_hide_for_ie">',"<li>\u68c0\u67e5\u662f\u5426\u5b89\u88c5\u4e86360\u624b\u673a\u52a9\u624b\uff08\u5305\u542b\u5728\u5b89\u5168\u536b\u58eb\u7684\u529f\u80fd\u5927\u5168\u4e2d\uff09</li>","<li>\u5f00\u542f360\u624b\u673a\u52a9\u624b\u7684\u6d4f\u89c8\u5668\u652f\u6301\u9009\u9879\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</li>","</ul>",'<p class="zsp_btnCon">','<span class="zsp_btnKnow zsp_close" title="\u6211\u77e5\u9053\u4e86">&nbsp;</span>','<a class="zsp_btnInst zsp_close zsp_hide_for_ie" id="zsp_btndload" href="http://www.360.cn/shoujizhushou/index.html" target="360zhushouOFS" >\u5b89\u88c5360\u624b\u673a\u52a9\u624b<span>&gt;&gt;</span></a>','<a href="{{url}}" class="zsp_btnApp zsp_close">\u4e0b\u8f7d\u8be5\u8f6f\u4ef6\u5230\u7535\u8111<span>&gt;&gt;</span></a>','<span class="zsp_show_for_ie zsp_ie_timer">\u8be5\u63d0\u793a<em id="zsp_cls_counter">6</em>\u79d2\u540e\u81ea\u52a8\u5173\u95ed</span>',"</p>",'<a class="zsp_cls zsp_close" href="#nogo"></a>',"</div>"].join(""),s={init:function(){var e=this.container=document.createElement("div"),t=this.mask=document.createElement("div");e.id="qmarket_tiper",e.className=n?"zsp_pop zsp_pop_ie":"zsp_pop",t.className="zsp_cover",t.id="zsp_cover",document.body.appendChild(e),document.body.appendChild(t),this.isHidden=!0,this.bindEvents()},bindEvents:function(){var e=/\s?zsp_close\s?/ig,n=this;this.container.onclick=function(t){var t=t||window.event,r=t.target||t.srcElement;e.lastIndex=0,e.test(r.className)&&setTimeout(function(){n.close()},100);if(r&&r.getAttribute("href").indexOf("#nogo")>-1)return!1},this.mask.onclick=function(){n.close()},t.addEvent(window,"resize",function(){n.isHidden||n.setMaskSize()})},getHtml:function(e){return i.replace(/\{\{([^}]+)\}\}/ig,function(n,r){if(r.indexOf("|")>-1){var i=r.split("|");return t.subByte(e[i[0]]||r,i[1],"...")}return e[r]||r})},show:function(t){this.container||this.init();if(window.MMClient&&e.isWeishiInstalled())return!0;var r=t.substr("zhushou360://".length).split("&"),i={};for(var s=0;s<r.length;s++){var o=r[s].split("=");i[o[0]]=o[1]}var u=this.getHtml(i);return this.container.innerHTML=u,this._show(),n&&this.countdown(),!1},countdown:function(){this.clearTimer();var e=document.getElementById("zsp_cls_counter"),t=this,n=10;(function(){if(n<=0){t.close();return}e.innerHTML=n,n-=1,t.timer=setTimeout(arguments.callee,1e3)})()},_show:function(){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop;this.mask.style.display="block",this.setMaskSize(),this.container.style.display="block",this.setCss(this.container,{marginLeft:-this.container.offsetWidth/2+"px",marginTop:-this.container.offsetHeight/2+"px"}),this.isHidden=!1,r&&this.setCss(this.container,{top:n+document.documentElement.clientHeight/2+"px"})},setMaskSize:function(){var e=document.body,t=document.documentElement,n=Math.max(Math.max(e.scrollHeight,t.scrollHeight),Math.max(e.offsetHeight,t.offsetHeight),Math.max(e.clientHeight,t.clientHeight));this.mask.style.height=n+"px"},setCss:function(e,t){var n=e.style;for(var r in t)n[r]=t[r]},close:function(){this.isHidden=!0,this.mask.style.display="none",this.container.style.display="none",this.clearTimer()},clearTimer:function(){this.timer&&clearTimeout(this.timer)}};document.write('<link type="text/css" rel="stylesheet" href="thirdparty_tip.css" media="all"/>'),window.MMClient=e,window.QMarketTiper=s})();